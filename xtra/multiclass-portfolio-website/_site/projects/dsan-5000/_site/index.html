<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Courtney Green">

<title>DSAN-5000: Project - Cell Block Tango:  Steps of Misconduct, Over-Policing, and Cycles of Racial Injustice in Chicago’s Criminal Justice System</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./assets/gu-logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DSAN-5000: Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./report/report.html"> 
<span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-technical-details" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Technical details</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-technical-details">    
        <li>
    <a class="dropdown-item" href="./technical-details/data-collection/main.html">
 <span class="dropdown-text">Data-collection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/data-cleaning/main.html">
 <span class="dropdown-text">Data-cleaning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/data-balancing/main.html">
 <span class="dropdown-text">Counterfactual Data Balancing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/eda/main.html">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/unsupervised-learning/main.html">
 <span class="dropdown-text">Unsupervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/supervised-learning/main.html">
 <span class="dropdown-text">Supervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/progress-log.html">
 <span class="dropdown-text">Progress Log</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./technical-details/llm-usage-log.html">
 <span class="dropdown-text">LLM usage Log</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./bibliography.html"> 
<span class="menu-text">Bibliography</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./appendix.html"> 
<span class="menu-text">Appendix</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dsan-5000/project-courtneyrgreen.git"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://crg123.georgetown.domains/"> 
<span class="menu-text">Back to Portfolio</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-motivation" id="toc-introduction-motivation" class="nav-link active" data-scroll-target="#introduction-motivation">Introduction &amp; Motivation</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research Questions</a></li>
  <li><a href="#visualizing-injustice-exonerations-and-arrests-across-illinois" id="toc-visualizing-injustice-exonerations-and-arrests-across-illinois" class="nav-link" data-scroll-target="#visualizing-injustice-exonerations-and-arrests-across-illinois">Visualizing Injustice: Exonerations and Arrests Across Illinois</a></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review">Literature Review</a>
  <ul class="collapse">
  <li><a href="#citizens-perceptions-of-over-and-under-policing-a-look-at-race-ethnicity-and-community-characteristics" id="toc-citizens-perceptions-of-over-and-under-policing-a-look-at-race-ethnicity-and-community-characteristics" class="nav-link" data-scroll-target="#citizens-perceptions-of-over-and-under-policing-a-look-at-race-ethnicity-and-community-characteristics"><em>Citizens’ Perceptions of Over-and Under-Policing: A Look at Race, Ethnicity, and Community Characteristics</em></a></li>
  <li><a href="#over-policing-black-bodies-the-need-for-multidimensional-and-transformative-reforms" id="toc-over-policing-black-bodies-the-need-for-multidimensional-and-transformative-reforms" class="nav-link" data-scroll-target="#over-policing-black-bodies-the-need-for-multidimensional-and-transformative-reforms"><em>Over-Policing Black Bodies: The Need for Multidimensional and Transformative Reforms</em></a></li>
  <li><a href="#chicago-ranks-no.-1-in-exonerations-for-5th-year-in-a-row-accounting-for-more-than-half-of-national-total" id="toc-chicago-ranks-no.-1-in-exonerations-for-5th-year-in-a-row-accounting-for-more-than-half-of-national-total" class="nav-link" data-scroll-target="#chicago-ranks-no.-1-in-exonerations-for-5th-year-in-a-row-accounting-for-more-than-half-of-national-total"><em>Chicago Ranks No.&nbsp;1 in Exonerations for 5th Year in a Row, Accounting for More Than Half of National Total</em></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cell Block Tango: <br> Steps of Misconduct, Over-Policing, and Cycles of Racial Injustice in Chicago’s Criminal Justice System</h1>
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Courtney Green </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction-motivation" class="level2">
<h2 class="anchored" data-anchor-id="introduction-motivation">Introduction &amp; Motivation</h2>
<p>Chicago serves as both a microcosm and a magnifying glass for the systemic failures embedded in the U.S. criminal justice system. For five consecutive years, the city has led the nation in exonerations, a grim testament to entrenched racial bias, police misconduct, and flawed policing practices<span class="citation" data-cites="wttwChicagoRanks"><sup><a href="#ref-wttwChicagoRanks" role="doc-biblioref">1</a></sup></span>. Yet, Chicago is more than an anomaly—it is a focal point within a broader, statewide crisis, and a reflection of nationwide patterns.</p>
<p>This project expands the lens to examine Illinois as a whole, using Chicago as a critical case study to investigate how wrongful convictions and over-policing disproportionately devastate Black and Latino communities. By analyzing exoneration patterns, arrest rates, incarceration data, and demographics at the county level, this work uncovers the ways systemic injustices ripple across Illinois. Chicago’s staggering share of exonerations exposes the extreme, but it also reflects a deeper, structural issue that transcends city limits.</p>
</section>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<ol type="1">
<li>What patterns emerge in exoneration data across Illinois counties, and how do they reflect systemic failures in the justice system?<br>
</li>
<li>Why does Chicago account for such a disproportionate share of wrongful convictions in Illinois?<br>
</li>
<li>Does over-policing disproportionately target marginalized communities, particularly Black and Latino populations?<br>
</li>
<li>What role does police misconduct play in wrongful convictions across Illinois? Is there a relationship between misconduct and race?<br>
</li>
<li>Can data-driven models identify predictive patterns of wrongful convictions and over-policing across Illinois counties?</li>
</ol>
<hr>
</section>
<section id="visualizing-injustice-exonerations-and-arrests-across-illinois" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-injustice-exonerations-and-arrests-across-illinois">Visualizing Injustice: Exonerations and Arrests Across Illinois</h2>
<p><img src="images/log_scaled_exonerations_by_county.png" class="img-fluid" alt="Illinois Log-Scaled Exonerations by County"><br>
<em>Figure 1: Log-Scaled Exonerations by County (including and excluding Cook County).</em></p>
<p><img src="images/log_scaled_arrests_by_county.png" class="img-fluid" alt="Illinois Log-Scaled Arrests by County"><br>
<em>Figure 2: Log-Scaled Arrests by County (including and excluding Cook County).</em></p>
</section>
<section id="literature-review" class="level1">
<h1>Literature Review</h1>
<p>This section lays the groundwork for understanding systemic issues within Illinois’ law enforcement system, including over-policing, wrongful convictions, and racial disparities. By combining empirical studies, historical context, and policy analysis, the literature highlights persistent patterns:</p>
<ul>
<li>The <strong>over-under-policing paradox</strong>, where marginalized communities face aggressive surveillance yet lack adequate protection.<br>
</li>
<li>Systemic police misconduct and its role in driving wrongful convictions.<br>
</li>
<li>How race and socioeconomic status intersect to shape crime patterns, policing practices, and perceptions of justice.</li>
</ul>
<p>By distilling these insights, this review sets the stage for a deeper, more critical analysis of Illinois’ justice system and the structures that sustain its failures.</p>
<section id="citizens-perceptions-of-over-and-under-policing-a-look-at-race-ethnicity-and-community-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="citizens-perceptions-of-over-and-under-policing-a-look-at-race-ethnicity-and-community-characteristics"><em>Citizens’ Perceptions of Over-and Under-Policing: A Look at Race, Ethnicity, and Community Characteristics</em></h2>
<p>Boehme, Cann, and Isom (2020) examine how race, ethnicity, and community characteristics influence public perceptions of policing, shedding light on the <strong>over-under-policing paradox</strong>. The authors demonstrate how marginalized communities—particularly Black and Latino neighborhoods—experience aggressive over-policing through surveillance and frequent police encounters, while simultaneously being under-protected when it comes to safety and support. This dual dynamic fosters a deep sense of distrust, isolation, and legal cynicism, perpetuating systemic divides. Importantly, their findings emphasize that race remains a consistent predictor of these perceptions, even after accounting for economic conditions and neighborhood characteristics like concentrated disadvantage and ethnic diversity<span class="citation" data-cites="boehme_citizens_2020"><sup><a href="#ref-boehme_citizens_2020" role="doc-biblioref">2</a></sup></span>.</p>
<p>Using data from the <strong>PHDCN Community Survey</strong>, which captures responses from 8,782 participants across 343 Chicago neighborhoods, the authors employ <strong>Hierarchical Linear Modeling (HLM)</strong> to analyze how individual- and community-level factors shape perceptions of policing. Their results reveal that while neighborhood context plays a significant role, racialized policing persists, with Black and Latino residents disproportionately reporting over-policing experiences regardless of socioeconomic conditions<span class="citation" data-cites="boehme_citizens_2020"><sup><a href="#ref-boehme_citizens_2020" role="doc-biblioref">2</a></sup></span>.</p>
<p>The study is particularly important to this project for two key reasons. First, it highlights how structural factors—such as poverty, race, and neighborhood composition—intersect to produce divergent policing experiences. This intersectionality aligns with the project’s focus on exploring the racialized and systemic roots of policing disparities in Chicago and Illinois as a whole. Second, the research exposes a <strong>feedback loop</strong> in which over-surveillance and under-service deepen distrust and isolation within marginalized communities. This insight reinforces the project’s aim to uncover how systemic racial biases and inequities sustain harmful policing cycles, particularly in Black and Latino neighborhoods across Chicago<span class="citation" data-cites="boehme_citizens_2020"><sup><a href="#ref-boehme_citizens_2020" role="doc-biblioref">2</a></sup></span>.</p>
</section>
<section id="over-policing-black-bodies-the-need-for-multidimensional-and-transformative-reforms" class="level2">
<h2 class="anchored" data-anchor-id="over-policing-black-bodies-the-need-for-multidimensional-and-transformative-reforms"><em>Over-Policing Black Bodies: The Need for Multidimensional and Transformative Reforms</em></h2>
<p>Jones-Brown and Williams (2021) provide a critical analysis of over-policing in Black communities, demonstrating how racial disparities in police interactions—such as traffic stops, consent searches, and arrests—are rooted in systemic biases that criminalize Black identity. Drawing on both quantitative data and qualitative accounts, the authors reveal the psychological toll of aggressive policing, which fosters a <strong>feedback loop</strong> of fear, mistrust, and isolation. High-profile cases like the deaths of George Floyd and Breonna Taylor serve as stark representations of this broader issue, amplified by social media as a tool for documenting police brutality. Meanwhile, mainstream media often mischaracterizes Black-led protests, further reinforcing harmful stereotypes. By situating these patterns within a historical context—referencing the 1967 Katzenbach Report and the <strong>War on Drugs</strong>—the authors expose the longstanding structural roots of racialized policing, particularly relevant to cities like Chicago<span class="citation" data-cites="jones-brown_over-policing_2021"><sup><a href="#ref-jones-brown_over-policing_2021" role="doc-biblioref">3</a></sup></span>.</p>
<p>Jones-Brown and Williams’ study is integral context for the research for several reasons. First, it underscores how structural racism and historical policy decisions continue to drive over-policing in Black communities, a phenomenon reflected in Chicago’s policing data. Second, it highlights the dual perspective of quantitative evidence and qualitative lived experiences—an approach I aim to incorporate into my analysis to capture both the scope and human impact of over-policing. Lastly, their reform recommendations offer a foundation for addressing systemic disparities, aligning with my goal of examining how community-driven solutions can disrupt harmful policing cycles<span class="citation" data-cites="jones-brown_over-policing_2021"><sup><a href="#ref-jones-brown_over-policing_2021" role="doc-biblioref">3</a></sup></span>. By situating over-policing within a historical and structural framework, this study provides a comprehensive understanding of the issue and offers pathways for transformative change. These insights directly support the project’s examination of how racialized policing practices and systemic corruption perpetuate injustice in Chicago’s Black communities<span class="citation" data-cites="jones-brown_over-policing_2021"><sup><a href="#ref-jones-brown_over-policing_2021" role="doc-biblioref">3</a></sup></span>.</p>
</section>
<section id="chicago-ranks-no.-1-in-exonerations-for-5th-year-in-a-row-accounting-for-more-than-half-of-national-total" class="level2">
<h2 class="anchored" data-anchor-id="chicago-ranks-no.-1-in-exonerations-for-5th-year-in-a-row-accounting-for-more-than-half-of-national-total"><em>Chicago Ranks No.&nbsp;1 in Exonerations for 5th Year in a Row, Accounting for More Than Half of National Total</em></h2>
<p>Heather Cherone (2023) highlights Chicago’s troubling distinction as the nation’s leader in wrongful convictions, with Cook County alone accounting for over half of all U.S. exonerations in 2022. Drawing on data from the <strong>National Registry of Exonerations</strong>, the analysis uncovers systemic patterns of police misconduct, racial disparities, and institutional resistance to reform—issues central to this project’s examination of injustice within Illinois’ criminal justice system<span class="citation" data-cites="wttwChicagoRanks"><sup><a href="#ref-wttwChicagoRanks" role="doc-biblioref">1</a></sup></span>.</p>
<p>The article reveals the disproportionate toll of wrongful convictions on Black and Latino communities, underscoring the racialized nature of policing in Chicago. At the core of this crisis is police misconduct, exemplified by officers like Ronald Watts and Reynaldo Guevara, whose corrupt practices—ranging from extortion to framing suspects—are linked to a significant share of exonerations. These patterns not only devastate individuals and their communities but also impose a staggering financial burden on the city. In 2022, Chicago spent <strong>$98 million</strong> settling police misconduct cases, with the 2023 budget allocating another <strong>$82 million</strong>, signaling the immense economic cost of systemic failures. Despite the federal consent decree issued in 2017 to address these issues, the Chicago Police Department remains only <strong>3% compliant</strong>, reflecting deep institutional resistance to change<span class="citation" data-cites="wttwChicagoRanks"><sup><a href="#ref-wttwChicagoRanks" role="doc-biblioref">1</a></sup></span>.</p>
<p>This analysis provides a critical foundation for the project. By examining exoneration data, it highlights the role of racialized policing practices and systemic misconduct in perpetuating wrongful convictions. Chicago’s prominence in these statistics offers a unique lens through which to explore broader patterns of injustice across Illinois, serving as both a focal point and a microcosm of nationwide systemic failures. Additionally, the data-driven approach of the <strong>National Registry of Exonerations</strong> aligns closely with this project’s methodology. While not replicating the study, this project builds upon its findings by conducting further analysis of Illinois exoneration trends to uncover how race, police misconduct, and institutional barriers contribute to these systemic injustices.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-wttwChicagoRanks" class="csl-entry" role="listitem">
1. Cherone, H. (2023). Chicago ranks no. 1 in exonerations for 5th year in a row, accounting for more than half of national total: report. In <em>WTTW</em>. <a href="&quot;https://news.wttw.com/2023/05/16/chicago-ranks-no-1-exonerations-5th-year-row-accounting-more-half-national-total-report&quot;">"https://news.wttw.com/2023/05/16/chicago-ranks-no-1-exonerations-5th-year-row-accounting-more-half-national-total-report"</a>
</div>
<div id="ref-boehme_citizens_2020" class="csl-entry" role="listitem">
2. Boehme, H. M., Cann, D., &amp; Isom, D. A. (2020). Citizens’ <span>Perceptions</span> of <span>Over</span>- and <span>Under</span>-<span>Policing</span>: <span>A</span> <span>Look</span> at <span>Race</span>, <span>Ethnicity</span>, and <span>Community</span> <span>Characteristics</span>. <em>Sage</em>, 32. <a href="https://doi.org/10.1177/0011128720974309">https://doi.org/10.1177/0011128720974309</a>
</div>
<div id="ref-jones-brown_over-policing_2021" class="csl-entry" role="listitem">
3. Jones-Brown, D., &amp; Williams, J. M. (2021). Over-policing <span>Black</span> bodies: The need for multidimensional and transformative reforms. <em>Journal of Ethnicity in Criminal Justice</em>, <em>19</em>(3-4), 181–187. <a href="https://doi.org/10.1080/15377938.2021.1992326">https://doi.org/10.1080/15377938.2021.1992326</a>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>